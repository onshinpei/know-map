# 函数式编程的理解

## 什么是函数式编程

函数式编程是一种编程范式，是一种构建计算机程序结构和单元的风格，它把计算看作是对数学函数的评估，避免了状态的变化和数据的可变。通俗的话来说就是**函数式编程就是把函数作为一等公民来使用就是函数式编程**

## 纯函数

当我们想要理解函数式编程时，需要知道的第一个是基本概念就是纯函数，但纯函数又是什么呢？
::: tip 纯函数的定义
    - 如果给定相同的参数，则返回相同的结果（也成为**确定性**）
    - 它不会引起任何副作用
:::

### 1. 给定相同的参数， 则得到相同的结果

以下是要实现一个计算圆的面积的函数，我们使用非纯函数和纯函数去实现

#### 非存函数的实现

``` javascript
    let PI = 3.14
    const area = (radius) => radius ** 2 * PI
    area(10)
```

为什么这不是一个纯函数呢？原因很简单，因为它使用了一个没有作为参数的变量，如果这个变量在某处赋了不同的值 `PI = 10`, 那么他就会有不同的结果。

#### 纯函数实现

``` javascript
    let PI = 3.14
    const area = (radius, pi) => radius ** 2 * pi
    area(10, PI)
```

::: warning 以下是非纯函数

- 如果我们写了一个函数，去实时读取文件，那么它不是纯函数，因为它每次返回的可能不一样;

``` javascript
    let countText = (text) => `count: ${text.length}`
    function readFile(filename) {
        let text = fs.readFileSync(filename, 'utf8')
        return countText(text)
    }
```

- 任何依赖于随机数生成器的函数都不是纯函数

``` javascript
function greeting() {
    if (Math.random > 0.5) {
        return 'good mornming'
    } else {
        return 'good afternoon'
    }
}
```

:::

### 2. 无明显副作用

纯函数无明显可见的副作用。可见副作用的例子包括修改全局或通过引用传递的参数。

所以**如果我们遵循这两条简单的规则， 就会更容易理解我们的程序。 现在每个函数都是孤立的， 不能影响系统的其他部分**

## 纯函数的好处

纯函数代码肯定是更加容易测试的，不需要mock任何东西， 我们可以使用不同的上下文对纯函数进行单元测试。